(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(29).concat([function(e,t,a){e.exports=a.p+"static/media/logo.ee6c6505.svg"},,,function(e,t,a){e.exports=a.p+"static/media/foot-logo.dab1a15c.svg"},,,function(e,t,a){e.exports=a.p+"static/media/thumb.523c0ab6.svg"},function(e,t,a){e.exports=a.p+"static/media/logo.507e0e56.svg"},function(e){e.exports={lyric:"[00:00.000] \u4f5c\u66f2 : \u9ec4\u5bb6\u9a79\u21b5[00:00.666] \u4f5c\u8bcd : \u9ec4\u5bb6\u9a79\u21b5[00:02.000] \u7f16\u66f2\uff1aBeyond/\u6881\u90a6\u5f66\u21b5[00:03.000] \u76d1\u5236\uff1aBeyond/\u6881\u90a6\u5f66\u21b5[00:18.466] \u4eca\u5929\u6211 \u5bd2\u591c\u91cc\u770b\u96ea\u98d8\u8fc7\u21b5[00:25.110] \u6000\u7740\u51b7\u5374\u4e86\u7684\u5fc3\u7a9d\u6f02\u8fdc\u65b9\u21b5[00:30.950] \u98ce\u96e8\u91cc\u8ffd\u8d76 \u96fe\u91cc\u5206\u4e0d\u6e05\u5f71\u8e2a\u21b5[00:37.229] \u5929\u7a7a\u6d77\u9614\u4f60\u4e0e\u6211\u21b5[00:40.291] \u53ef\u4f1a\u53d8\uff08\u8c01\u6ca1\u5728\u53d8\uff09\u21b5[00:43.440] \u591a\u5c11\u6b21 \u8fce\u7740\u51b7\u773c\u4e0e\u5632\u7b11\u21b5[00:50.050] \u4ece\u6ca1\u6709\u653e\u5f03\u8fc7\u5fc3\u4e2d\u7684\u7406\u60f3\u21b5[00:55.907] \u4e00\u5239\u90a3\u604d\u60da \u82e5\u6709\u6240\u5931\u7684\u611f\u89c9\u21b5[01:02.133] \u4e0d\u77e5\u4e0d\u89c9\u5df2\u53d8\u6de1\u21b5[01:05.243] \u5fc3\u91cc\u7231\uff08\u8c01\u660e\u767d\u6211\uff09\u21b5[01:08.801] \u539f\u8c05\u6211\u8fd9\u4e00\u751f\u4e0d\u7f81\u653e\u7eb5\u7231\u81ea\u7531\u21b5[01:15.799] \u4e5f\u4f1a\u6015\u6709\u4e00\u5929\u4f1a\u8dcc\u5012\u21b5[01:22.008] \u80cc\u5f03\u4e86\u7406\u60f3 \u8c01\u4eba\u90fd\u53ef\u4ee5\u21b5[01:28.276] \u54ea\u4f1a\u6015\u6709\u4e00\u5929\u53ea\u4f60\u5171\u6211\u21b5[01:34.102]\u21b5[01:42.695] \u4eca\u5929\u6211 \u5bd2\u591c\u91cc\u770b\u96ea\u98d8\u8fc7\u21b5[01:49.284] \u6000\u7740\u51b7\u5374\u4e86\u7684\u5fc3\u7a9d\u6f02\u8fdc\u65b9\u21b5[01:55.189] \u98ce\u96e8\u91cc\u8ffd\u8d76 \u96fe\u91cc\u5206\u4e0d\u6e05\u5f71\u8e2a\u21b5[02:01.405] \u5929\u7a7a\u6d77\u9614\u4f60\u4e0e\u6211\u21b5[02:04.535] \u53ef\u4f1a\u53d8\uff08\u8c01\u6ca1\u5728\u53d8\uff09\u21b5[02:08.014] \u539f\u8c05\u6211\u8fd9\u4e00\u751f\u4e0d\u7f81\u653e\u7eb5\u7231\u81ea\u7531\u21b5[02:15.040] \u4e5f\u4f1a\u6015\u6709\u4e00\u5929\u4f1a\u8dcc\u5012\u21b5[02:21.279] \u80cc\u5f03\u4e86\u7406\u60f3 \u8c01\u4eba\u90fd\u53ef\u4ee5\u21b5[02:27.531] \u54ea\u4f1a\u6015\u6709\u4e00\u5929\u53ea\u4f60\u5171\u6211\u21b5[02:33.633]\u21b5[03:08.454] \u4ecd\u7136\u81ea\u7531\u81ea\u6211 \u6c38\u8fdc\u9ad8\u5531\u6211\u6b4c\u21b5[03:15.064] \u8d70\u904d\u5343\u91cc\u21b5[03:19.739] \u539f\u8c05\u6211\u8fd9\u4e00\u751f\u4e0d\u7f81\u653e\u7eb5\u7231\u81ea\u7531\u21b5[03:26.734] \u4e5f\u4f1a\u6015\u6709\u4e00\u5929\u4f1a\u8dcc\u5012\u21b5[03:33.005] \u80cc\u5f03\u4e86\u7406\u60f3 \u8c01\u4eba\u90fd\u53ef\u4ee5\u21b5[03:39.257] \u54ea\u4f1a\u6015\u6709\u4e00\u5929\u53ea\u4f60\u5171\u6211\u21b5[03:45.496] \u80cc\u5f03\u4e86\u7406\u60f3 \u8c01\u4eba\u90fd\u53ef\u4ee5\u21b5[03:51.756] \u54ea\u4f1a\u6015\u6709\u4e00\u5929\u53ea\u4f60\u5171\u6211\u21b5[03:57.201] \u539f\u8c05\u6211\u8fd9\u4e00\u751f\u4e0d\u7f81\u653e\u7eb5\u7231\u81ea\u7531\u21b5[04:04.204] \u4e5f\u4f1a\u6015\u6709\u4e00\u5929\u4f1a\u8dcc\u5012\u21b5[04:10.456] \u80cc\u5f03\u4e86\u7406\u60f3 \u8c01\u4eba\u90fd\u53ef\u4ee5\u21b5[04:16.647] \u54ea\u4f1a\u6015\u6709\u4e00\u5929\u53ea\u4f60\u5171\u6211\u21b5[04:22.828]\u21b5"}},,function(e,t,a){e.exports=a(88)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(28),r=a.n(i),l=(a(44),a(1)),c=a(2),o=a(4),m=a(3),u=a(5),h=(a(45),a(29)),d=a.n(h),p=function(){return s.a.createElement("header",{className:"site-header"},s.a.createElement("div",{className:"header-wrapper clearfix"},s.a.createElement("h1",{className:"logo"},s.a.createElement("span",{className:"site-name"},"\u7f51\u6613\u4e91\u97f3\u4e50"),s.a.createElement("img",{src:d.a,alt:"logo",className:"logo-img"})),s.a.createElement("div",{className:"btn-wrapper"},s.a.createElement("button",{className:"btn"},"\u4e0b\u8f7dAPP"))))},v=a(6),f=(a(46),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"index-tab",style:{top:this.props.top}},s.a.createElement("ul",{className:"tab-list clearfix"},s.a.createElement("li",{className:"tab-item"},s.a.createElement(v.c,{to:"/",exact:!0,className:"tab-link"},"\u63a8\u8350\u97f3\u4e50")),s.a.createElement("li",{className:"tab-item"},s.a.createElement(v.c,{to:"/toplist",className:"tab-link"},"\u70ed\u6b4c\u699c")),s.a.createElement("li",{className:"tab-item"},s.a.createElement(v.c,{to:"/search",className:"tab-link"},"\u641c\u7d22"))))}}]),t}(s.a.Component)),y=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(p,null),s.a.createElement(f,null),this.props.children)}}]),t}(s.a.Component),E=a(32),g=a.n(E),b=(a(51),function(){return s.a.createElement("footer",{className:"site-footer"},s.a.createElement("div",{className:"logo"},s.a.createElement("img",{src:g.a,alt:"foot-logo",className:"logo-img"})),s.a.createElement("div",{className:"btn-wrapper"},s.a.createElement("button",{className:"btn"},"\u6253\u5f00APP\uff0c\u53d1\u73b0\u66f4\u591a\u597d\u97f3\u4e50 >")),s.a.createElement("div",{className:"copyright"},s.a.createElement("span",null,"\u57fa\u4e8eReact typescript\u7684\u4e2a\u4eba\u5b9e\u8df5\u9879\u76ee @Quino")))}),N=(a(52),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("h3",{className:"section-title"},s.a.createElement("span",{className:"txt"},this.props.name))}}]),t}(s.a.Component)),k=(a(53),a(7)),O=a.n(k),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return O.a.get("/playlist/detail",{params:{id:e}}).then(function(e){return e.data})};O.a.defaults.baseURL="http://www.liqun91.top:8888",O.a.defaults.withCredentials=!0;var S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={playlists:[]},a.initData(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"initData",value:function(){var e=this;O.a.get("/personalized").then(function(e){return e.data}).then(function(t){e.setState({playlists:t.result.slice(0,9)})})}},{key:"render",value:function(){var e=this,t=this.state.playlists.map(function(t){return e.renderItem(t)});return s.a.createElement("div",{className:"j-playlist"},s.a.createElement(N,{name:"\u63a8\u8350\u6b4c\u5355"}),s.a.createElement("ul",{className:"playlist-list clearfix"},t))}},{key:"renderItem",value:function(e){return s.a.createElement("div",{className:"playlist-item",key:e.id},s.a.createElement(v.b,{to:"/playlist/"+e.id,className:"playlist-link"},s.a.createElement("div",{className:"img img-wrapper"},s.a.createElement("img",{src:e.picUrl,alt:"playlist picture"})),s.a.createElement("p",{className:"name f-thide-2"},e.name)))}}]),t}(s.a.Component),w=(a(71),function(){return s.a.createElement("div",{className:"j-loading"},s.a.createElement("div",{className:"loading-content clearfix"},s.a.createElement("div",{className:"loading-item loading-item-1"}),s.a.createElement("div",{className:"loading-item loading-item-2"}),s.a.createElement("div",{className:"loading-item loading-item-3"}),s.a.createElement("div",{className:"loading-item loading-item-4"})))}),C=(a(72),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={songs:[]},a.initData(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"initData",value:function(){var e=this;O.a.get("/personalized/newsong").then(function(e){return e.data}).then(function(t){e.setState({songs:t.result})})}},{key:"render",value:function(){var e=this,t=this.state.songs.map(function(t){return e.renderSong(t)});return s.a.createElement("div",{className:"top-songs"},s.a.createElement(N,{name:"\u6700\u65b0\u97f3\u4e50"}),this.state.songs.length?s.a.createElement("ul",{className:"song-list"},t):s.a.createElement(w,null))}},{key:"renderSong",value:function(e){return s.a.createElement("li",{className:"song-item",key:e.id},s.a.createElement(v.b,{to:"/song/"+e.id,className:"song-link"},s.a.createElement("div",{className:"info"},s.a.createElement("p",{className:"name f-thide"},s.a.createElement("span",{className:"em"},e.name),s.a.createElement("span",null,e.song.alias.length?"\uff08"+e.song.alias.join(" ")+"\uff09":"")),s.a.createElement("p",{className:"ar f-thide"},1===e.song.no&&s.a.createElement("span",{className:"icon"}),s.a.createElement("span",null,this.joinNames(e.song.artists)+"- "+e.song.album.name))),s.a.createElement("div",{className:"play-btn"})))}},{key:"joinNames",value:function(e){return e.reduce(function(e,t){return e+(t.name+" ")},"")}}]),t}(s.a.Component)),I=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(S,null),s.a.createElement(C,null),s.a.createElement(b,null))}}]),t}(s.a.Component);function D(e){return e>9?String(e):"0"+String(e)}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY\u5e74MM\u6708DD\u65e5 hh:mm:ss",a=Number(e);Number.isNaN(a)&&(a=Date.now());var n=new Date(a);return t.replace(/Y+|M+|D+|h+|m+|s+/g,function(e){switch(e[0]){case"Y":return 2===e.length?String(n.getFullYear()).slice(2):String(n.getFullYear());case"M":return D(n.getMonth()+1);case"D":return D(n.getDate());case"h":return D(n.getHours());case"m":return D(n.getMinutes());case"s":return D(n.getSeconds());default:return""}})}a(73);var H=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,a){return e.renderTrack(t,a)});return s.a.createElement("ul",{className:"song-list"},t)}},{key:"renderTrack",value:function(e,t){return s.a.createElement("li",{className:"track-item",key:e.id},s.a.createElement(v.b,{to:"/song/"+e.id,className:"item-link"},s.a.createElement("div",{className:t<3?"order top3":"order"},D(t+1)),s.a.createElement("div",{className:"info"},s.a.createElement("p",{className:"name f-thide"},s.a.createElement("span",{className:"em"},e.name)),s.a.createElement("p",{className:"ar f-thide"},1===e.no&&s.a.createElement("span",{className:"icon"}),s.a.createElement("span",null,e.ar[0].name+"- "+e.al.name))),s.a.createElement("div",{className:"play-btn"})))}}]),t}(s.a.Component),M=(a(74),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={playlist:null,showNumber:20},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"initData",value:function(){var e=this;j(1).then(function(t){e.setState({playlist:t.playlist})})}},{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=[];if(this.state.playlist){var a=this.state.showNumber||this.state.playlist.tracks.length;t=this.state.playlist.tracks.slice(0,a)}return s.a.createElement("div",{className:"top-song-list"},!this.state.playlist&&s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement(w,null)),this.state.playlist&&s.a.createElement("div",null,s.a.createElement("div",{className:"banner-wrapper"},s.a.createElement("div",{className:"banner"},s.a.createElement("div",{className:"banner-icon"}),s.a.createElement("div",{className:"time"},"\u66f4\u65b0\u65f6\u95f4\uff1a",x(this.state.playlist.updateTime,"MM\u6708DD\u65e5")))),s.a.createElement(H,{tracks:t}),!!this.state.showNumber&&s.a.createElement("div",{className:"show-all"},s.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.showAllTracks()}},"\u663e\u793a\u5b8c\u6574\u699c\u5355 >"))))}},{key:"showAllTracks",value:function(){this.setState({showNumber:0})}}]),t}(s.a.Component)),T=a(38),F=a(33),R=JSON.parse(localStorage.getItem("search-history")||"[]");var Y=Object(F.a)(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ADD_HISTORY":return[e=a.payload].concat(Object(T.a)(t.filter(function(t){return t!==e})));case"REMOVE_HISTORY":return e=a.payload,t.filter(function(t){return t!==e});case"CLEAR_HISTORY":return[];case"SAVE_HISTORY":localStorage.setItem("search-history",JSON.stringify(t));default:return t}}),P=(a(76),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.list.map(function(t,a){return e.renderItem(t.first,a)});return s.a.createElement("div",{className:"hot-search"},s.a.createElement("div",{className:"title"},"\u70ed\u95e8\u641c\u7d22"),s.a.createElement("ul",{className:"hot-search-list"},t))}},{key:"renderItem",value:function(e,t){var a=this;return s.a.createElement("li",{className:"hot-search-item",key:e,onClick:function(){a.props.handleClick(t)}},e)}}]),t}(s.a.Component)),A=(a(77),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.history.map(function(t,a){return e.renderItem(t,a)});return s.a.createElement("ul",{className:"search-history-list"},t)}},{key:"renderItem",value:function(e,t){var a=this;return s.a.createElement("li",{className:"history-item",key:e},s.a.createElement("div",{className:"icon-clock"}),s.a.createElement("div",{className:"content"},s.a.createElement("span",{className:"txt",onClick:function(){a.props.handleClick(t)}},e),s.a.createElement("div",{onClick:function(){a.props.handleDelete(t)},className:"close"},s.a.createElement("span",{className:"close-icon"}))))}}]),t}(s.a.Component)),K=(a(78),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.suggests.map(function(t){return e.renderItem(t.keyword)});return s.a.createElement("div",{className:"search-suggest"},s.a.createElement("div",{className:"key",onClick:function(){e.props.handleClick(e.props.keyword)}},"\u641c\u7d22 \u201c",this.props.keyword,"\u201d"),s.a.createElement("ul",{className:"suggest-list"},t))}},{key:"renderItem",value:function(e){var t=this;return s.a.createElement("li",{className:"suggest-item",key:e,onClick:function(){t.props.handleClick(e)}},s.a.createElement("div",{className:"search-icon"}),s.a.createElement("div",{className:"txt"},e))}}]),t}(s.a.Component)),U=(a(79),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.songs.map(function(t){return e.renderSong(t)});return s.a.createElement("div",{className:"search-result"},s.a.createElement("ul",{className:"song-list"},t))}},{key:"renderSong",value:function(e){return s.a.createElement("li",{className:"song-item",key:e.id},s.a.createElement(v.b,{className:"song-link",to:"song/"+e.id},s.a.createElement("div",{className:"info"},s.a.createElement("p",{className:"name f-thide"},this.renderWithKeyword(e.name)),s.a.createElement("p",{className:"ar f-thide"},null!==e.mvid&&s.a.createElement("span",{className:"icon"}),s.a.createElement("span",null,this.renderWithKeyword(this.joinNames(e.artists)),s.a.createElement("span",null," - "),this.renderWithKeyword(e.album.name)))),s.a.createElement("div",{className:"play-btn"})))}},{key:"renderWithKeyword",value:function(e){var t=this.props.keyword,a={__html:e.split(t).join('<em class="em-key">'.concat(t,"</em>"))};return s.a.createElement("span",{dangerouslySetInnerHTML:a})}},{key:"joinNames",value:function(e){return e.reduce(function(e,t){return e+(t.name+" ")},"")}}]),t}(s.a.Component)),_=(a(80),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"search-input"},s.a.createElement("form",{action:"#",method:"get",className:"search-form",onSubmit:this.submit.bind(this)},s.a.createElement("div",{className:"form-content"},s.a.createElement("div",{className:"search-icon"}),s.a.createElement("div",{className:"input-wrap"},s.a.createElement("input",{type:"search",name:"input",className:"input",autoComplete:"off",value:this.props.value,onChange:this.handleChange.bind(this),onFocus:this.props.handleFocus})),!!this.props.value&&s.a.createElement("div",{className:"close",onClick:this.props.handleClearInput},s.a.createElement("i",{className:"close-icon"})))))}},{key:"submit",value:function(e){e.currentTarget.input.blur(),e.preventDefault(),this.props.handleSubmit()}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.handleInput(t)}}]),t}(s.a.Component)),L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={hotSearch:[],searchSuggests:[],songs:[],searchHistory:Y.getState(),keyword:"",searched:!1},a.fetchHotSearch(),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(_,{value:this.state.keyword,handleInput:this.handleInput.bind(this),handleClearInput:this.handleClearInput.bind(this),handleSubmit:this.handleSubmit.bind(this),handleFocus:this.inputFocus.bind(this)}),!this.state.keyword&&s.a.createElement(P,{list:this.state.hotSearch,handleClick:this.handleHotSearchItemClick.bind(this)}),!this.state.keyword&&s.a.createElement(A,{history:this.state.searchHistory,handleClick:this.handleHistoryClick.bind(this),handleDelete:this.deleteHistory.bind(this)}),this.state.keyword&&!this.state.searched&&!!this.state.searchSuggests.length&&s.a.createElement(K,{suggests:this.state.searchSuggests,keyword:this.state.keyword,handleClick:this.handleSuggestClick.bind(this)}),this.state.keyword&&!this.state.searched&&!this.state.searchSuggests.length&&s.a.createElement(w,null),this.state.searched&&!!this.state.songs.length&&s.a.createElement(U,{songs:this.state.songs,keyword:this.state.keyword}),this.state.searched&&!this.state.songs.length&&s.a.createElement(w,null))}},{key:"handleSuggestClick",value:function(e){this.searchForKeyword(e)}},{key:"handleHotSearchItemClick",value:function(e){this.searchForKeyword(this.state.hotSearch[e].first)}},{key:"handleHistoryClick",value:function(e){this.searchForKeyword(this.state.searchHistory[e])}},{key:"searchForKeyword",value:function(e){var t=this;this.setState({searched:!0}),this.setState({keyword:e}),this.addHistory(e),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return O.a.get("/search",{params:{keywords:e,type:t}}).then(function(e){return e.data})}(e).then(function(e){t.setState({songs:e.result.songs||[]})})}},{key:"deleteHistory",value:function(e){var t=this.state.searchHistory[e];Y.dispatch({type:"REMOVE_HISTORY",payload:t})}},{key:"inputFocus",value:function(){this.state.keyword&&(this.setState({songs:[],searchSuggests:[],searched:!1}),this.fetchSearchSuggest(this.state.keyword))}},{key:"handleInput",value:function(e){this.setState({keyword:e,searchSuggests:[]}),e&&this.fetchSearchSuggest(e)}},{key:"handleClearInput",value:function(){this.setState({keyword:"",searched:!1,songs:[],searchSuggests:[]})}},{key:"handleSubmit",value:function(){var e=this.state.keyword;this.setState({searched:!1,songs:[]}),e&&this.searchForKeyword(e)}},{key:"addHistory",value:function(e){Y.dispatch({type:"ADD_HISTORY",payload:e})}},{key:"fetchHotSearch",value:function(){var e=this;O.a.get("/search/hot").then(function(e){return e.data}).then(function(t){e.setState({hotSearch:t.result.hots})})}},{key:"fetchSearchSuggest",value:function(e){var t=this;e&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mobile";return O.a.get("/search/suggest",{params:{keywords:e,type:t}}).then(function(e){return e.data})}(e).then(function(e){e.result.allMatch&&t.setState({searchSuggests:e.result.allMatch})})}},{key:"componentDidMount",value:function(){var e=this;Y.subscribe(function(){e.setState({searchHistory:Y.getState()})})}}]),t}(s.a.Component),W=(a(81),a(35)),B=a.n(W),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={hotComments:null,comments:null,commentCount:0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(!this.state.hotComments||!this.state.comments)return s.a.createElement("div",null);var t=this.state.hotComments.map(function(t){return e.renderComment(t)}),a=this.state.comments.map(function(t){return e.renderComment(t)});return s.a.createElement("div",{className:this.props.inPlayer?"m-comment in-player":"m-comment"},!!this.state.hotComments.length&&s.a.createElement("div",{className:"hot"},s.a.createElement("div",{className:"line-title"},"\u7cbe\u5f69\u8bc4\u8bba"),s.a.createElement("ul",{className:"comment-list"},t)),s.a.createElement("div",{className:"normal"},s.a.createElement("div",{className:"line-title"},"\u6700\u65b0\u8bc4\u8bba(",this.state.commentCount,")"),s.a.createElement("ul",{className:"comment-list"},a)))}},{key:"renderComment",value:function(e){return s.a.createElement("li",{className:"comment-item",key:e.commentId},s.a.createElement("div",{className:"avatar"},s.a.createElement("img",{src:e.user.avatarUrl,alt:""})),s.a.createElement("div",{className:"cnt"},s.a.createElement("div",{className:"top"},s.a.createElement("div",{className:"user"},s.a.createElement("div",{className:"name f-thide"},e.user.nickname),s.a.createElement("div",{className:"time"},x(e.time,"Y\u5e74M\u6708D\u65e5"))),s.a.createElement("div",{className:"like-info"},s.a.createElement("span",{className:"num"},e.likedCount?e.likedCount:""),s.a.createElement("img",{src:B.a,className:"thumb"}))),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"txt"},e.content),!!e.beReplied.length&&s.a.createElement("div",{className:"reply"},"@",e.beReplied[0].user.nickname,":",e.beReplied[0].content))))}},{key:"fetchComments",value:function(){var e=this;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"song";return O.a.get("/comment/"+t,{params:{id:e}}).then(function(e){return e.data})})(this.props.id,this.props.type).then(function(t){e.setState({hotComments:t.hotComments,comments:t.comments,commentCount:t.total})})}},{key:"componentDidMount",value:function(){this.fetchComments()}}]),t}(s.a.Component);J.defaultProps={inPlayer:!1};var V=J,z=(a(82),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"song-detail-bottom"},s.a.createElement("div",{className:"btn btn-open"},"\u6253 \u5f00"),s.a.createElement("div",{className:"btn btn-dld"},"\u4e0b \u8f7d"))}}]),t}(s.a.Component)),q=(a(83),a(36)),Q=a.n(q),$=a(37),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).player=null,a.state={discRotateDeg:0,playing:!1,audio:null,timer:null,lyrics:[],lyricIndex:0,src:""},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.lyrics.map(function(t,a){return e.renderLyric(t,a)});return s.a.createElement("div",{className:"player-wrapper",ref:function(t){return e.player=t}},s.a.createElement("div",{className:"tap-area",onClick:this.togglePlayStatus.bind(this)}),s.a.createElement("h1",{className:"logo"},s.a.createElement("img",{src:Q.a})),s.a.createElement("div",{className:"album"},s.a.createElement("div",{className:"al",style:{transform:"rotate("+this.state.discRotateDeg+"deg)"}},s.a.createElement("div",{className:"img"},s.a.createElement("img",{src:this.props.img}))),!this.state.playing&&s.a.createElement("div",{className:"play-btn"})),s.a.createElement("div",{className:"song-info"},s.a.createElement("span",{className:"name"},this.props.name),s.a.createElement("span",{className:"sep"},"-"),s.a.createElement("span",{className:"ar"},this.props.artist)),s.a.createElement("div",{className:"lyric"},s.a.createElement("div",{className:"lyric-list",style:{transform:"translateY(-"+30*this.state.lyricIndex+"px)"}},t)),s.a.createElement("div",{className:"scroll-up"},s.a.createElement("p",{className:"more"},"\u56e0\u4e3a\u6b4c\u8bcd\u63a5\u53e3\u95ee\u9898\uff0c\u4ee5\u4e0a\u6b4c\u8bcd\u4e0e\u6b4c\u66f2\u65e0\u5173 >"),s.a.createElement("div",{className:"btn-wrapper",onClick:this.hidePlayer.bind(this)},s.a.createElement("div",{className:"btn-icon"}))))}},{key:"hidePlayer",value:function(){if(this.player){var e=this.player.offsetHeight;this.props.scrollOff(e)}}},{key:"initLyric",value:function(){var e=this,t=$.lyric.split("[").slice(1).map(function(t){var a=t.split("]");return{txt:a[1].replace("\u21b5"," "),time:e.formatMillsec(a[0])}});this.setState({lyrics:t})}},{key:"renderLyric",value:function(e,t){var a=this.state.lyricIndex;return s.a.createElement("p",{className:t===a?"lyric-item active":"lyric-item",key:e.time+e.txt},e.txt)}},{key:"formatMillsec",value:function(e){var t=e.split(":"),a=0;return 3===t.length&&(a+=60*Number(t[0])*60,t=t.slice(1)),a+=60*Number(t[0]),a+=Number(t[1])}},{key:"togglePlayStatus",value:function(){!this.state.playing?this.play():this.pause()}},{key:"rotateDisc",value:function(){var e=this;if(this.state.audio){var t=this.state.audio.currentTime,a=this.state,n=a.lyricIndex,s=a.lyrics;s.length&&s[n+1].time-t<.3&&this.setState({lyricIndex:n+1}),this.state.audio.ended&&this.pause()}this.state.timer&&clearTimeout(this.state.timer);var i=this.state.discRotateDeg;360===(i+=1)&&(i=0),this.setState({discRotateDeg:i}),this.state.playing&&this.setState({timer:window.setTimeout(function(){e.rotateDisc()},60)})}},{key:"play",value:function(){var e=this,t=this.state,a=t.src,n=t.audio;!n&&a&&(n=new Audio(a),this.setState({audio:n})),n&&n.play(),this.setState({playing:!0},function(){e.rotateDisc()})}},{key:"pause",value:function(){var e=this.state.audio;e&&e.pause(),this.setState({playing:!1,timer:null})}},{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.id,O.a.get("/song/url",{params:{id:e}}).then(function(e){return e.data.data[0].url})).then(function(e){t.setState({src:e})}),this.initLyric()}},{key:"componentWillUnmount",value:function(){var e=this.state.audio;e&&e.pause(),this.state.timer&&clearTimeout(this.state.timer)}}]),t}(s.a.Component),X=(a(84),a(85),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"linked-playlist"},s.a.createElement("div",{className:"tit"},"\u5305\u542b\u8fd9\u9996\u6b4c\u7684\u6b4c\u5355"),s.a.createElement("div",{className:"playlist"},this.props.playlists.map(function(e){return s.a.createElement("div",{className:"playlist-item"},s.a.createElement(v.b,{to:"/playlist/"+e.id,className:"item-link"},s.a.createElement("div",{className:"img-wrapper"},s.a.createElement("img",{src:e.coverImgUrl,alt:""}),s.a.createElement("div",{className:"play-count"},s.a.createElement("span",{className:"icon-ear"}),s.a.createElement("span",{className:"num"},(t=e.playCount)>=1e8?(t/1e8).toFixed(1)+"\u4ebf":t>=1e4?(t/1e4).toFixed(0)+"\u4e07":String(t)))),s.a.createElement("div",{className:"name f-thide"},e.name),s.a.createElement("div",{className:"ar f-thide"},"by ",e.creator.nickname)));var t})))}}]),t}(s.a.Component)),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).scrollElement=null,a.state={song:null,id:0,playlists:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.initData(),document.body.scrollTop=1,document.documentElement.scrollTop=1}},{key:"render",value:function(){var e=this;return this.state.song?s.a.createElement("div",{className:"song-detail"},s.a.createElement("div",{className:"song-content"},s.a.createElement("div",{className:"song-bg",style:{backgroundImage:"url(//music.163.com/api/img/blur/"+this.state.song.al.pic+")"}}),s.a.createElement("div",{className:"song-scroll",ref:function(t){return e.scrollElement=t}},s.a.createElement(G,{id:this.state.id,img:this.state.song.al.picUrl,name:this.state.song.name,scrollOff:this.scrollOffPlayer.bind(this),artist:this.state.song.ar[0].name}),!!this.state.playlists.length&&s.a.createElement(X,{playlists:this.state.playlists}),s.a.createElement(V,{inPlayer:!0,type:"music",id:this.state.id})),s.a.createElement("div",{className:"foot"},s.a.createElement(z,null)))):s.a.createElement("div",{style:{padding:"50px 0"}},s.a.createElement(w,null))}},{key:"initData",value:function(){var e=this,t=Number(this.props.match.params.id);this.setState({id:t}),function(e){return O.a.get("/song/detail",{params:{ids:e}}).then(function(e){return e.data.songs[0]})}(t).then(function(t){e.setState({song:t})})}},{key:"scrollOffPlayer",value:function(e){this.scrollElement&&this.animateScroll(this.scrollElement,e,300)}},{key:"animateScroll",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,s=e.scrollTop,i=Math.round(a/n),r=(t-s)/i,l=0,c=setInterval(function(){++l===i?(e.scrollTop=t,clearInterval(c)):e.scrollTop=s+l*r},n)}}]),t}(s.a.Component),ee=(a(86),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(m.a)(t).call(this,e))).state={id:0,playlist:null,descriptionFolded:!0},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"playlist-detail"},this.state.playlist?s.a.createElement("div",{className:"playlist-content"},s.a.createElement("div",{className:"header clearfix"},s.a.createElement("div",{className:"bg",style:{backgroundImage:"url("+this.state.playlist.creator.backgroundUrl+")"}}),s.a.createElement("div",{className:"img-wrapper",style:{backgroundImage:"url("+this.state.playlist.coverImgUrl+")"}},s.a.createElement("div",{className:"img"},s.a.createElement("div",{className:"tag"},"\u6b4c\u5355"),s.a.createElement("div",{className:"play-count"},s.a.createElement("div",{className:"icon"}),s.a.createElement("div",{className:"count"},this.count2str(this.state.playlist.playCount))))),s.a.createElement("div",{className:"info"},s.a.createElement("div",{className:"name f-thide-2"},this.state.playlist.name),s.a.createElement("div",{className:"creator clearfix"},s.a.createElement("div",{className:"avatar"},s.a.createElement("img",{src:this.state.playlist.creator.avatarUrl,alt:""})),s.a.createElement("div",{className:"username f-thide"},this.state.playlist.creator.nickname)))),s.a.createElement("div",{className:"desc"},!!this.state.playlist.tags.length&&s.a.createElement("div",{className:"tags clearfix"},s.a.createElement("div",{className:"label"},"\u6807\u7b7e\uff1a"),this.state.playlist.tags.map(function(e){return s.a.createElement("div",{className:"tag-item",key:e},e)})),!!this.state.playlist.description&&s.a.createElement("div",{className:"description"},s.a.createElement("p",{className:this.state.descriptionFolded?"f-thide-3":""},"\u7b80\u4ecb\uff1a",this.state.playlist.description),s.a.createElement("div",{className:"fold",onClick:this.toggleFold.bind(this)},s.a.createElement("div",{className:this.state.descriptionFolded?"icon":"icon undo"})))),s.a.createElement("div",{className:"line-title"},"\u6b4c\u66f2\u5217\u8868"),s.a.createElement(H,{tracks:this.state.playlist.tracks.slice(0,50)}),s.a.createElement(V,{id:this.state.id,type:"playlist"})):s.a.createElement("div",{className:"loading-wrapper"},s.a.createElement(w,null)))}},{key:"count2str",value:function(e){return e<1e4?String(e):String(e).slice(0,-4)+"\u4e07"}},{key:"toggleFold",value:function(){this.setState({descriptionFolded:!this.state.descriptionFolded})}},{key:"componentDidMount",value:function(){var e=this,t=Number(this.props.match.params.id);j(t).then(function(a){e.setState({id:t,playlist:a.playlist})})}}]),t}(s.a.Component)),te=a(8),ae=(a(87),function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement(v.a,null,s.a.createElement(te.c,null,s.a.createElement(te.a,{path:"/song/:id",component:Z}),s.a.createElement(te.a,{path:"/playlist/:id",component:ee}),s.a.createElement(y,null,s.a.createElement(te.a,{path:"/",exact:!0,component:I}),s.a.createElement(te.a,{path:"/toplist",component:M}),s.a.createElement(te.a,{path:"/search",component:L}))))}}]),t}(s.a.Component));window.onbeforeunload=function(){Y.dispatch({type:"SAVE_HISTORY"})};var ne=ae;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}]),[[39,1,2]]]);
//# sourceMappingURL=main.ddeb15c7.chunk.js.map